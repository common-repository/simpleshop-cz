(()=>{var e={730:e=>{var t,o,r=9007199254740991,l="[object Function]",n="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/,i=Object.prototype,p=i.hasOwnProperty,a=i.toString,c=i.propertyIsEnumerable,u=(t=Object.keys,o=Object,function(e){return t(o(e))}),m=Math.max,h=!c.call({valueOf:1},"valueOf");function f(e,t,o){var r=e[t];p.call(e,t)&&g(r,o)&&(void 0!==o||t in e)||(e[t]=o)}function d(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||s.test(e))&&e>-1&&e%1==0&&e<t}function b(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}function g(e,t){return e===t||e!=e&&t!=t}var v=Array.isArray;function _(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!function(e){var t=S(e)?a.call(e):"";return t==l||t==n}(e)}function S(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var y,w=(y=function(e,t){if(h||b(t)||_(t))!function(e,t,o,r){o||(o={});for(var l=-1,n=t.length;++l<n;){var s=t[l];f(o,s,e[s])}}(t,function(e){return _(e)?function(e,t){var o=v(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&_(e)}(e)&&p.call(e,"callee")&&(!c.call(e,"callee")||"[object Arguments]"==a.call(e))}(e)?function(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}(e.length,String):[],r=o.length,l=!!r;for(var n in e)!t&&!p.call(e,n)||l&&("length"==n||d(n,r))||o.push(n);return o}(e):function(e){if(!b(e))return u(e);var t=[];for(var o in Object(e))p.call(e,o)&&"constructor"!=o&&t.push(o);return t}(e)}(t),e);else for(var o in t)p.call(t,o)&&f(e,o,t[o])},function(e,t){return t=m(void 0===t?e.length-1:t,0),function(){for(var o=arguments,r=-1,l=m(o.length-t,0),n=Array(l);++r<l;)n[r]=o[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=o[r];return s[t]=n,function(e,t,o){switch(o.length){case 0:return e.call(t);case 1:return e.call(t,o[0]);case 2:return e.call(t,o[0],o[1]);case 3:return e.call(t,o[0],o[1],o[2])}return e.apply(t,o)}(e,this,s)}}((function(e,t){var o=-1,r=t.length,l=r>1?t[r-1]:void 0,n=r>2?t[2]:void 0;for(l=y.length>3&&"function"==typeof l?(r--,l):void 0,n&&function(e,t,o){if(!S(o))return!1;var r=typeof t;return!!("number"==r?_(o)&&d(t,o.length):"string"==r&&t in o)&&g(o[t],e)}(t[0],t[1],n)&&(l=r<3?void 0:l,r=1),e=Object(e);++o<r;){var s=t[o];s&&y(e,s)}return e})));e.exports=w}},t={};function o(r){var l=t[r];if(void 0!==l)return l.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React;var t=o(730),r=o.n(t);const l=window.wp.blocks,n=window.wp.i18n,s=window.wp.blockEditor,i=window.wp.components,p={attributes:{ssFormId:{type:"string",default:"("+(0,n.__)("Choose the Product at the right panel","simpleshop-cz")+")"}},save:function({attributes:t,className:o}){const r="https://form.simpleshop.cz/iframe/js/?id="+t.ssFormId;return(0,e.createElement)("div",{class:"simpleshop-form",className:o},(0,e.createElement)("script",{type:"text/javascript",src:r}))}},{__experimentalGetSettings:a}=wp.date,{addFilter:c}=wp.hooks,{createHigherOrderComponent:u}=wp.compose;c("blocks.registerBlockType","simpleshop/attributes/custom",((e,t)=>(e.attributes=r()(e.attributes,{simpleShopGroup:{type:"string"},simpleShopGroups:{type:"array"},simpleShopIsMember:{type:"string"},simpleShopIsLoggedIn:{type:"string"},simpleShopIgnoreDates:{type:"bool"},simpleShopDaysToView:{type:"string"},simpleShopSpecificDateFrom:{type:"string",default:""},simpleShopSpecificDateTo:{type:"string"}}),e)));const m=u((t=>o=>{const{simpleShopGroup:r,simpleShopGroups:l,simpleShopIsMember:p,simpleShopIsLoggedIn:c,simpleShopIgnoreDates:u,simpleShopDaysToView:m,simpleShopSpecificDateFrom:h,simpleShopSpecificDateTo:f}=o.attributes;let d=a();const b=/a(?!\\)/i.test(d.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));let g=ssGutenbergVariables.groups,v=[];for(let e in g)v.push({label:g[e],value:e});let _=l;return void 0===l&&(_=r?[r]:[]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,{...o}),(0,e.createElement)(s.InspectorControls,null,(0,e.createElement)(i.PanelBody,{title:(0,n.__)("SimpleShop Settings","simpleshop-cz"),initialOpen:!0},(0,e.createElement)("p",null,(0,e.createElement)("a",{href:"https://podpora.redbit.cz/stitek/wp-plugin/",target:"_blank"},(0,n.__)("Help - SimpleShop plugin","simpleshop-cz"))),(0,e.createElement)(i.SelectControl,{label:(0,n.__)("The block will be visible to:","simpleshop-cz"),value:c,options:[{label:(0,n.__)("Choose","simpleshop-cz"),value:""},{label:(0,n.__)("Logged in user","simpleshop-cz"),value:"yes"},{label:(0,n.__)("Logged out user","simpleshop-cz"),value:"no"}],onChange:e=>{o.setAttributes({simpleShopIsLoggedIn:e}),e&&"no"!==e||o.setAttributes({simpleShopIsMember:"",simpleShopGroups:[]})}}),"yes"===c&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.SelectControl,{label:(0,n.__)("Membership","simpleshop-cz"),value:p,options:[{label:(0,n.__)("Choose","simpleshop-cz"),value:""},{label:(0,n.__)("Is a member of:","simpleshop-cz"),value:"yes"},{label:(0,n.__)("Is not a member of:","simpleshop-cz"),value:"no"}],onChange:e=>{o.setAttributes({simpleShopIsMember:e})}}),v.map((t=>(0,e.createElement)(i.ToggleControl,{label:t.label,checked:_.includes(t.value),onChange:e=>{const r=[..._];if(e)r.push(t.value);else{const e=r.indexOf(t.value);e>-1&&r.splice(e,1)}o.setAttributes({simpleShopGroups:r})}})))),(0,e.createElement)(i.TextControl,{label:(0,n.__)("Days to view","simpleshop-cz"),value:m,onChange:e=>{o.setAttributes({simpleShopDaysToView:e})}}),(0,e.createElement)(i.ToggleControl,{label:(0,n.__)("Ignore date limits","simpleshop-cz"),help:(0,n.__)("Check to completely disable limiting access to the content by date","simpleshop-cz"),checked:u,onChange:()=>o.setAttributes({simpleShopIgnoreDates:!u})}),!u&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h4",null,(0,n.__)("From date","simpleshop-cz")),(0,e.createElement)(i.DateTimePicker,{label:(0,n.__)("From date","simpleshop-cz"),currentDate:h,value:h,onChange:e=>{o.setAttributes({simpleShopSpecificDateFrom:e})},is12Hour:b}),(0,e.createElement)("h4",null,(0,n.__)("To date","simpleshop-cz")),(0,e.createElement)(i.DateTimePicker,{label:(0,n.__)("To date","simpleshop-cz"),currentDate:f,value:f,onChange:e=>{o.setAttributes({simpleShopSpecificDateTo:e})},is12Hour:b})))))}),"withInspectorControls");wp.hooks.addFilter("editor.BlockEdit","display-heading/with-inspector-controls",m),(0,l.registerBlockType)("simpleshop/simpleshop-form",{title:(0,n.__)("SimpleShop Form","simpleshop-cz"),icon:"shield",category:"common",keywords:[(0,n.__)("SimpleShop","simpleshop-cz"),(0,n.__)("Form","simpleshop-cz")],edit:t=>{const{attributes:o,setAttributes:r,className:l}=t,[p,a]=(0,e.useState)(!1),[c,u]=(0,e.useState)(null),m=()=>{let e=new FormData;e.append("action","load_simple_shop_products"),fetch(ajaxurl,{method:"post",body:e}).then((function(e){return a(!0),e.json()})).then((function(e){let t=[{label:(0,n.__)("Choose a product","simpleshop-cz"),value:""}];Object.keys(e).forEach((function(o){t.push({label:e[o],value:o})})),u(t)}))};return p||m(),(0,e.createElement)("div",{className:l},(0,e.createElement)("div",null,(0,n.__)("SimpleShop Form","simpleshop-cz")," ",o.ssFormId),(0,e.createElement)(s.InspectorControls,{key:"inspector"},(0,e.createElement)(i.PanelBody,null,p?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.SelectControl,{className:"simpleshop-form-select",label:(0,n.__)("SimpleShop Form","simpleshop-cz"),description:(0,n.__)("Select the SimpleShop Form","simpleshop-cz"),options:c,value:o.ssFormId,onChange:e=>r({ssFormId:e})}),(0,e.createElement)(i.Button,{onClick:()=>(a(!1),void m())},(0,n.__)("Reload forms","simpleshop-cz"))):(0,e.createElement)(e.Fragment,null,"Loading"))))},save:()=>null,deprecated:[p]})})()})();